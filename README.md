# AShareGPT

A-share (China) factor mining and backtesting using **minute CSV** data.

## Data Layout
```
AShareGPT/
  data/
    2025/
      000001.SZ.csv
      600519.SH.csv
    复权因子/
      000001.SZ.csv
```
Each CSV must contain columns:
`trade_time, open, high, low, close, vol, amount`

## Quick Start
```bash
cd AShareGPT
python run_cn_train.py
python run_cn_backtest.py --strategy best_cn_strategy.json
```

## Migration (v0.6.0)
- `model_core.infrastructure.legacy` has been removed.
- If you imported trainer compatibility directly, use:
  - `from model_core.infrastructure.adapters import LegacyAlphaTrainer`
- CLI entry points are unchanged:
  - `python run_cn_train.py`
  - `python run_cn_backtest.py ...`

## Environment Variables
See `.env.example` for settings (signal minute, exit minute, date filters).
`CN_REWARD_MODE` controls formula ranking in training (`train` or `selection`).

## Notes
- Default backtest window is the **latest 120 trading days** unless you set `CN_MINUTE_END_DATE`.
- Features are **61 factors** generated by `pandas_ta` + custom volume/price features.
- Optional adj-factor integration via `CN_USE_ADJ_FACTOR` (default on).
- Train/Val/Test splits and walk-forward validation are available via env vars.
- Optional code alias mapping file `code_alias_map.csv` supports old ticker -> new ticker adj-factor fallback.
