# AShareGPT Configuration (Minute CSV)

# Data location (relative to project root)
CN_MINUTE_DATA_ROOT=data
CN_MINUTE_YEARS=2025

# Symbols (comma-separated). Leave empty to auto-pick from data folders.
CN_CODES=
CN_MAX_CODES=50

# Date filters (optional)
CN_MINUTE_START_DATE=
CN_MINUTE_END_DATE=

# Default window if no end date is provided
CN_MINUTE_DAYS=120

# Decision frequency: 'daily' or '1min'
# - daily: aggregate minute bars to one per day
# - 1min:  use raw minute bars as decision timeline
CN_DECISION_FREQ=1min

# Bar style (only used when CN_DECISION_FREQ=daily)
# - daily:           full-session OHLCV
# - signal_snapshot:  single-minute snapshot at signal time
CN_BAR_STYLE=daily

# Target return mode
# - close_to_close: close[t]/close[t-hold]-1  (T+1-safe default)
# - signal_to_exit:  entry open -> exit close within day (legacy)
CN_TARGET_RET_MODE=close_to_close
CN_HOLD_DAYS=1
CN_HOLD_BARS=1

# Signal/exit minutes (used for signal_to_exit or daily aggregation)
CN_SIGNAL_TIME=10:00
CN_EXIT_TIME=14:55
CN_SIGNAL_LAG=1

# T+1 settlement rule
CN_ENFORCE_T_PLUS_ONE=1
# Comma-separated codes exempt from T+1 (e.g. ETFs that allow T+0)
CN_T0_ALLOWED_CODES=

# Price-limit (涨跌停) detection tolerance
# 0.001 means 9.9% change is treated as reaching the 10% limit
CN_LIMIT_HIT_TOL=0.001

# Trading costs
COST_RATE=0.0005
SLIPPAGE_RATE=0.0001
SLIPPAGE_IMPACT=0.0
ALLOW_SHORT=0

# Annualization factor (auto-detected from CN_DECISION_FREQ if not set)
# daily ~= 252, 1min ~= 57600 (240 bars/day × 240 trading days)
ANNUALIZATION_FACTOR=

# Data split (ratio-based when *_DAYS=0)
CN_TRAIN_RATIO=0.7
CN_VAL_RATIO=0.0
CN_TEST_RATIO=0.3

# Data split (day-based, overrides ratio when > 0)
CN_TRAIN_DAYS=0
CN_VAL_DAYS=0
CN_TEST_DAYS=0

# Walk-forward optimization
CN_WALK_FORWARD=0
CN_WFO_TRAIN_DAYS=60
CN_WFO_VAL_DAYS=20
CN_WFO_TEST_DAYS=20
CN_WFO_STEP_DAYS=20

# Feature normalization
CN_FEATURE_NORM=train
CN_FEATURE_CLIP=5.0
CN_STRICT_FEATURE_INDICATORS=1
CN_FEATURE_NEAR_ZERO_STD_TOL=1e-6

# Training
BATCH_SIZE=1024
TRAIN_STEPS=400
MAX_FORMULA_LEN=8
PPO_EPOCHS=4
PPO_CLIP_EPS=0.2
PPO_VALUE_COEF=0.5
PPO_ENTROPY_COEF=0.01
PPO_MAX_GRAD_NORM=1.0

# Reward mode: 'train' or 'selection'
CN_REWARD_MODE=train

# Adjust factors
CN_USE_ADJ_FACTOR=1
CN_ADJ_FACTOR_DIR=复权因子
CN_CODE_ALIAS_FILE=code_alias_map.csv

# Output
STRATEGY_FILE=best_cn_strategy.json
